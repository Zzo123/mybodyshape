<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Body Shape Analysis</title>
    
    <!-- êµ¬ê¸€ ì• ë“œì„¼ìŠ¤ -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3735666512605515" crossorigin="anonymous"></script>

    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@3.18.0/dist/tf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8.5/dist/teachablemachine-image.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        :root { --primary-pink: #f43f5e; --sub-gray: #6b7280; --bg-light: #f9fafb; --trust-green: #059669; }
        body { 
            font-family: 'Pretendard', sans-serif; 
            background-color: var(--bg-light); 
            color: #1f2937; 
            margin: 0; 
            padding: 0;
            -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;
        }
        img { -webkit-user-drag: none; pointer-events: none; }
        
        nav { display: flex; justify-content: space-between; align-items: center; padding: 15px 25px; background: white; border-bottom: 1px solid #eee; }
        .nav-logo { font-size: 18px; font-weight: bold; color: var(--primary-pink); text-decoration: none; }
        
        .nav-right { display: flex; align-items: center; gap: 15px; }
        .nav-link { font-size: 13px; color: #4b5563; text-decoration: none; cursor: pointer; font-weight: 500; }

        .lang-switch {
            display: flex; gap: 2px; background: #f3f4f6; padding: 3px; border-radius: 20px; font-size: 11px; font-weight: bold; cursor: pointer;
        }
        .lang-btn { padding: 4px 10px; border-radius: 15px; color: #9ca3af; transition: 0.3s; }
        .lang-btn.active { background: white; color: var(--primary-pink); box-shadow: 0 2px 5px rgba(0,0,0,0.05); }

        .container { max-width: 600px; margin: 20px auto; background: white; border-radius: 30px; padding: 40px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); text-align: center; min-height: 600px; }
        .header h1 { font-size: 32px; color: var(--primary-pink); margin: 20px 0 10px; }
        .header p { color: var(--sub-gray); font-size: 15px; margin-bottom: 20px; line-height: 1.5; }
        
        .trust-badge-container { display: inline-flex; justify-content: center; gap: 20px; margin-bottom: 25px; padding: 12px 25px; background: #f0fdf4; border: 1.5px solid #dcfce7; border-radius: 50px; }
        .trust-badge { font-size: 14px; color: var(--trust-green); font-weight: 700; display: flex; align-items: center; gap: 6px; }

        .gender-group { display: flex; justify-content: center; gap: 10px; margin-bottom: 25px; }
        .gender-btn { padding: 12px 30px; border: 1px solid #ddd; border-radius: 20px; background: white; cursor: pointer; transition: 0.3s; font-weight: 600; }
        .gender-btn.active { background: var(--primary-pink); color: white; border-color: var(--primary-pink); }
        
        .guide-notice { background: #fff1f2; color: #e11d48; padding: 12px; border-radius: 12px; font-size: 13px; margin-bottom: 20px; line-height: 1.4; border: 1px solid #fecdd3; }
        .upload-area { border: 2px dashed #d1d5db; border-radius: 20px; padding: 50px 20px; cursor: pointer; transition: 0.3s; background: #fff; }
        .upload-area:hover { border-color: var(--primary-pink); background: #fff1f2; }
        .upload-icon { width: 64px; height: 64px; background: linear-gradient(135deg, #a855f7, #ec4899); border-radius: 18px; display: flex; align-items: center; justify-content: center; margin: 0 auto 15px; color: white; font-size: 32px; }
        .loading-spinner { width: 50px; height: 50px; border: 5px solid #f3f3f3; border-top: 5px solid #ec4899; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 20px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        .btn { display: block; width: 100%; padding: 18px; margin: 12px 0; border: 1px solid #e5e7eb; border-radius: 15px; background: white; font-size: 16px; cursor: pointer; transition: 0.2s; color: #374151; font-weight: 600; }
        .btn:hover { border-color: var(--primary-pink); color: var(--primary-pink); }
        
        #res-title { font-size: 28px; color: var(--primary-pink); margin-bottom: 25px; font-weight: 800; line-height: 1.3; }
        #res-body { text-align: left; background: #fff5f7; padding: 30px; border-radius: 20px; line-height: 1.9; font-size: 18px; word-break: keep-all; }
        .action-group { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 20px; }
        
        #toast { position: fixed; bottom: 50px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.8); color: white; padding: 12px 25px; border-radius: 30px; font-size: 14px; opacity: 0; transition: opacity 0.3s; pointer-events: none; z-index: 1000; }
        #toast.show { opacity: 1; }

        .info-section { text-align: left; margin-top: 40px; padding-top: 30px; border-top: 1px solid #eee; }
        .info-section h3 { font-size: 18px; color: #1f2937; margin-bottom: 10px; margin-top: 25px; }
        .info-section p { font-size: 14px; color: #4b5563; line-height: 1.6; margin-bottom: 10px; word-break: keep-all; }

        footer { margin-top: 50px; padding: 20px; font-size: 12px; color: #9ca3af; text-align: center; }
        .footer-links { margin-bottom: 15px; }
        .footer-links a { color: #6b7280; text-decoration: none; margin: 0 8px; font-weight: 500; transition: 0.2s; }
        .footer-links a:hover { color: var(--primary-pink); }
        .hidden { display: none; }
    </style>
</head>
<body>

<nav>
    <a href="#" class="nav-logo" id="nav-title">ğŸ‘™ ì²´í˜• ì§„ë‹¨ í…ŒìŠ¤íŠ¸</a>
    <div class="nav-right">
        <div class="nav-link" id="nav-info" onclick="showInfo()">ì²´í˜•ì§„ë‹¨ì´ë€?</div>
        <div class="lang-switch" onclick="toggleLang()">
            <span class="lang-btn active" id="btn-ko">í•œêµ­ì–´</span>
            <span class="lang-btn" id="btn-en">English</span>
        </div>
    </div>
</nav>

<div class="container">
    <div id="view-upload">
        <div class="header">
            <h1 id="main-title">ê³¨ê²© ì²´í˜• í…ŒìŠ¤íŠ¸</h1>
            <p id="main-desc">ë‚˜ì˜ ì‹¤ë£¨ì—£ì„ ì¸ê³µì§€ëŠ¥ì´ ì •ë°€ ë¶„ì„í•©ë‹ˆë‹¤.<br>ì¥ì ì„ ê·¹ëŒ€í™”í•˜ëŠ” ì¸ìƒ ì½”ë””ë¥¼ ì°¾ì•„ë³´ì„¸ìš”!</p>
        </div>

        <div class="trust-badge-container">
            <div class="trust-badge" id="badge-free">âœ… í‰ìƒ ë¬´ë£Œ ì„œë¹„ìŠ¤</div>
            <div class="trust-badge" id="badge-secure">ğŸ”’ ì‚¬ì§„ ë¯¸ì €ì¥ ë³´ì¥</div>
        </div>

        <div class="gender-group">
            <button id="btn-female" class="gender-btn active" onclick="setGender('female')">ğŸ‘© ì—¬ì„±</button>
            <button id="btn-male" class="gender-btn" onclick="setGender('male')">ğŸ‘¨ ë‚¨ì„±</button>
        </div>

        <div class="guide-notice" id="guide-box">
            ğŸ’¡ <strong>ì •í™•í•œ ì§„ë‹¨ì„ ìœ„í•œ íŒ</strong><br>
            ëª¸ì˜ ì™¸ê³½ ë¼ì¸ì´ ì˜ ë³´ì´ëŠ” ì˜·ì„ ì…ê³  ì´¬ì˜í•˜ë©´ íŒë… ì •í™•ë„ê°€ ì˜¬ë¼ê°‘ë‹ˆë‹¤!
        </div>

        <div class="upload-area" onclick="document.getElementById('img-input').click()">
            <div class="upload-icon">ğŸ“·</div>
            <p style="font-weight: bold; margin-bottom: 5px;" id="upload-main">ì „ì‹  ì‚¬ì§„ì„ ì„ íƒí•˜ì„¸ìš”!</p>
            <span style="font-size: 12px; color: #9ca3af;" id="upload-sub">ì‚¬ì§„ì„ ì˜¬ë¦¬ë©´ ìë™ìœ¼ë¡œ íŒë…ì´ ì‹œì‘ë©ë‹ˆë‹¤</span>
            <input type="file" id="img-input" class="hidden" accept="image/*" onchange="processAI(this)">
        </div>

        <!-- Explanatory Text Section -->
        <div class="info-section">
            <h3>ğŸ§ ì²´í˜• ì§„ë‹¨ì€ ì–´ë–¤ ì›ë¦¬ì¸ê°€ìš”?</h3>
            <p>
                ë³¸ í…ŒìŠ¤íŠ¸ëŠ” êµ¬ê¸€ì˜ Teachable Machine 2.0 ì¸ê³µì§€ëŠ¥ ëª¨ë¸ì„ í™œìš©í•˜ì—¬ ì œì‘ë˜ì—ˆìŠµë‹ˆë‹¤. 
                ìˆ˜ì²œ ì¥ì˜ ì²´í˜• ë°ì´í„°ë¥¼ í•™ìŠµí•œ AIê°€ ì‚¬ìš©ìì˜ ì‚¬ì§„ì—ì„œ ì–´ê¹¨ ë¼ì¸, ê³¨ë°˜ì˜ ë„ˆë¹„, 
                ì „ì²´ì ì¸ ì‹¤ë£¨ì—£ ë“± ë¯¸ì„¸í•œ íŠ¹ì§•ì„ ì¶”ì¶œí•˜ì—¬ ê°€ì¥ ìœ ì‚¬í•œ ê³¨ê²© ìœ í˜•ì„ ë¶„ì„í•©ë‹ˆë‹¤.
            </p>
            <p>
                ë‹¨ìˆœíˆ 'ë§ˆë¥´ë‹¤/í†µí†µí•˜ë‹¤'ë¥¼ êµ¬ë¶„í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, íƒ€ê³ ë‚œ ë¼ˆëŒ€ì™€ ê·¼ìœ¡ì˜ ë¶™ëŠ” ë°©ì‹ì„ 
                ê¸°ì¤€ìœ¼ë¡œ <strong>ìŠ¤íŠ¸ë ˆì´íŠ¸(Straight), ì›¨ì´ë¸Œ(Wave), ë‚´ì¶”ëŸ´(Natural)</strong> 
                ì„¸ ê°€ì§€ íƒ€ì…ìœ¼ë¡œ ë¶„ë¥˜í•©ë‹ˆë‹¤.
            </p>
            
            <h3>âœ¨ ì™œ ë‚´ ì²´í˜•ì„ ì•Œì•„ì•¼ í• ê¹Œìš”?</h3>
            <p>
                "ìœ í–‰í•˜ëŠ” ì˜·ì¸ë° ë‚´ê°€ ì…ìœ¼ë©´ ì´ìƒí• ê¹Œ?" ê³ ë¯¼í•´ ë³¸ ì  ìˆìœ¼ì‹ ê°€ìš”? 
                ê·¸ê²ƒì€ ëª¸ë§¤ì˜ ë¬¸ì œê°€ ì•„ë‹ˆë¼, 'ë‚´ ê³¨ê²©ì— ë§ì§€ ì•ŠëŠ” ë””ìì¸'ì„ ì…ì—ˆê¸° ë•Œë¬¸ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            </p>
            <p>
                ìì‹ ì˜ ê³¨ê²© íƒ€ì…ì„ ì•Œë©´ <strong>â‘  ë‹¨ì ì€ ê°€ë¦¬ê³  ì¥ì ì€ ë¶€ê°í•˜ëŠ” ìŠ¤íƒ€ì¼ë§</strong>ì´ ê°€ëŠ¥í•´ì§€ë©°, 
                <strong>â‘¡ ë¶ˆí•„ìš”í•œ ì˜· ì‡¼í•‘ ì‹¤íŒ¨ë¥¼ ì¤„ì—¬</strong> ê²½ì œì ì¸ ì†Œë¹„ë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 
                ì´ì œ ë¬´ì‘ì • ìœ í–‰ì„ ì«“ê¸°ë³´ë‹¤, ë‚˜ë¥¼ ê°€ì¥ ë¹›ë‚˜ê²Œ í•´ì£¼ëŠ” 'ì¸ìƒ í•'ì„ ì°¾ì•„ë³´ì„¸ìš”.
            </p>
        </div>
    </div>

    <div id="view-loading" class="hidden">
        <div style="padding: 60px 0;">
            <div class="loading-spinner"></div>
            <h3 style="color: var(--primary-pink);" id="loading-title">ì‚¬ì§„ì„ íŒë… ì¤‘ì…ë‹ˆë‹¤...</h3>
            <p style="color: #6b7280;" id="loading-desc">ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”!</p>
        </div>
    </div>

    <div id="view-survey" class="hidden">
        <h3 id="q-text" style="margin-bottom: 25px; line-height: 1.4; font-size: 20px;"></h3>
        <div id="q-options"></div>
    </div>

    <div id="view-result" class="hidden">
        <div id="capture-area">
            <h2 id="res-title"></h2>
            <div id="res-body"></div>
        </div>
        <div class="action-group">
            <button class="btn" onclick="downloadResult()" style="border-color: #a855f7; color: #a855f7;" id="btn-save">ğŸ’¾ ê²°ê³¼ ì €ì¥</button>
            <button class="btn" onclick="openShareMenu()" style="border-color: #ec4899; color: #ec4899;" id="btn-share">ğŸ“¤ ê³µìœ í•˜ê¸°</button>
        </div>
        <button class="btn" style="margin-top: 10px; background: #374151; color: white; border: none;" onclick="location.reload()" id="btn-retry">ë‹¤ì‹œ í…ŒìŠ¤íŠ¸í•˜ê¸°</button>
    </div>
</div>

<div id="toast">ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!</div>

<footer>
    <div class="footer-links">
        <a href="about.html">ì„œë¹„ìŠ¤ ì†Œê°œ</a> | 
        <a href="privacy.html">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a> | 
        <a href="contact.html">ë¬¸ì˜í•˜ê¸°</a>
    </div>
    Â© 2026 ë·°ìŠ¤íƒ€ ìª¼. All rights reserved.
</footer>

<script>
    let currentLang = 'ko';
    
    const TEXTS = {
        ko: {
            nav: "ğŸ‘™ ì²´í˜• ì§„ë‹¨ í…ŒìŠ¤íŠ¸",
            navInfo: "ì²´í˜•ì§„ë‹¨ì´ë€?",
            infoMsg: "ê³¨ê²© ì§„ë‹¨ì€ íƒ€ê³ ë‚œ ì‹ ì²´ íŠ¹ì§•ì„ ë¶„ì„í•´ ê°€ì¥ ë‹ë³´ì´ëŠ” ìŠ¤íƒ€ì¼ì„ ì œì•ˆí•˜ëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤.",
            title: "ê³¨ê²© ì²´í˜• í…ŒìŠ¤íŠ¸",
            desc: "ë‚˜ì˜ ì‹¤ë£¨ì—£ì„ ì¸ê³µì§€ëŠ¥ì´ ì •ë°€ ë¶„ì„í•©ë‹ˆë‹¤.<br>ì¥ì ì„ ê·¹ëŒ€í™”í•˜ëŠ” ì¸ìƒ ì½”ë””ë¥¼ ì°¾ì•„ë³´ì„¸ìš”!",
            badgeFree: "âœ… í‰ìƒ ë¬´ë£Œ ì„œë¹„ìŠ¤",
            badgeSecure: "ğŸ”’ ì‚¬ì§„ ë¯¸ì €ì¥ ë³´ì¥",
            genderF: "ğŸ‘© ì—¬ì„±",
            genderM: "ğŸ‘¨ ë‚¨ì„±",
            guide: "ğŸ’¡ <strong>ì •í™•í•œ ì§„ë‹¨ì„ ìœ„í•œ íŒ</strong><br>ëª¸ì˜ ì™¸ê³½ ë¼ì¸ì´ ì˜ ë³´ì´ëŠ” ì˜·ì„ ì…ê³  ì´¬ì˜í•˜ë©´ íŒë… ì •í™•ë„ê°€ ì˜¬ë¼ê°‘ë‹ˆë‹¤!",
            upMain: "ì „ì‹  ì‚¬ì§„ì„ ì„ íƒí•˜ì„¸ìš”!",
            upSub: "ì‚¬ì§„ì„ ì˜¬ë¦¬ë©´ ìë™ìœ¼ë¡œ íŒë…ì´ ì‹œì‘ë©ë‹ˆë‹¤",
            loadTitle: "ì‚¬ì§„ì„ íŒë… ì¤‘ì…ë‹ˆë‹¤...",
            loadDesc: "ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”!",
            btnSave: "ğŸ’¾ ê²°ê³¼ ì €ì¥",
            btnShare: "ğŸ“¤ ê³µìœ í•˜ê¸°",
            btnRetry: "ë‹¤ì‹œ í…ŒìŠ¤íŠ¸í•˜ê¸°",
            toast: "ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!",
            shareTitle: "AI ê³¨ê²© ì²´í˜• ì§„ë‹¨",
            qBank: [
                { q: "ëª©ì˜ ê¸¸ì´ëŠ” ì–´ë–¤ê°€ìš”?", a: "ë¹„êµì  ì§§ê³  ì–´ê¹¨ì„ ì´ ì§ì„ ì ì„", b: "ê°€ëŠ˜ê³  ê¸´ í¸ì„", c: "ê¸¸ê³  ë¼ˆëŒ€ê°€ ëšœë ·í•¨" },
                { q: "ì‡„ê³¨ ëª¨ì–‘ì€ ì–´ë–¤ê°€ìš”?", a: "ê±°ì˜ ë³´ì´ì§€ ì•ŠìŒ", b: "ê°€ëŠ˜ê²Œ ì¡´ì¬ê°ì´ ìˆìŒ", c: "êµµê³  ë„ë“œë¼ì§" },
                { q: "ì†ì˜ íŠ¹ì§•ì€?", a: "ì†ë°”ë‹¥ì— ì‚´ì§‘ì´ ìˆê³  ì‘ìŒ", b: "ì†ê°€ë½ì´ ê°€ëŠ˜ê³  ê¸´ í¸", c: "ë§ˆë””ê°€ êµµê³  ì† ìì²´ê°€ í¼" },
                { q: "í—ˆë¦¬ ë¼ì¸ì˜ ìœ„ì¹˜ëŠ”?", a: "ë†’ê³  êµ´ê³¡ì´ ì ìŒ", b: "ë‚®ê³  ì„ ì´ ê°€ëŠ˜ìŒ", c: "ê³¨ê²© í”„ë ˆì„ì´ í¼" },
                { q: "ë¬´ë¦ ë¼ˆì˜ íŠ¹ì§•ì€?", a: "ì‘ê³  ì˜ ë³´ì´ì§€ ì•ŠìŒ", b: "ë‘¥ê¸€ê³  ì ë‹¹í•¨", c: "í¬ê³  íŠ€ì–´ë‚˜ì™€ ë³´ì„" },
                { q: "ì–´ìš¸ë¦¬ëŠ” ìƒì˜ í•ì€?", a: "ê¹”ë”í•œ ì •ì‚¬ì´ì¦ˆ", b: "í™”ë ¤í•œ ë””í…Œì¼", c: "ì—¬ìœ ë¡œìš´ ë£¨ì¦ˆí•" },
                { q: "ì‚´ì´ ë¶™ëŠ” ë¶€ìœ„ëŠ”?", a: "ìƒì²´ì™€ ë°° ì£¼ë³€", b: "í•˜ì²´ì™€ ì—‰ë©ì´", c: "ì „ì²´ì ìœ¼ë¡œ ê³¨ê²©ì´ ì»¤ì§" },
                { q: "í”¼ë¶€ì˜ íƒ„ë ¥ê°ì€?", a: "íƒ±íƒ±í•˜ê³  íƒ„ë ¥ ìˆìŒ", b: "ë¶€ë“œëŸ½ê³  í‘¹ì‹ í•¨", c: "ê°€ì£½ì´ ë‘êº¼ìš´ ëŠë‚Œ" },
                { q: "ì•¡ì„¸ì„œë¦¬ ì·¨í–¥ì€?", a: "ì‹¬í”Œí•˜ê³  ê³ ê¸‰ì§", b: "ì‘ê³  ë°˜ì§ì„", c: "ë³¼ë“œí•˜ê³  ìì—°ìŠ¤ëŸ¬ì›€" },
                { q: "ë‚˜ì˜ ë² ìŠ¤íŠ¸ ì†Œì¬ëŠ”?", a: "ë¹³ë¹³í•œ ë©´/ì‹¤í¬", b: "ì‰¬í°/ë‹ˆíŠ¸", c: "ë¦°ë„¨/ë°ë‹˜" }
            ],
            res: {
                S: { fTitle: "âœ¨ ìŠ¤íŠ¸ë ˆì´íŠ¸ ì²´í˜•", mTitle: "ğŸ‘” ìŠ¤íŠ¸ë ˆì´íŠ¸ ì²´í˜•", 
                     fDesc: "<strong>ë‹¹ì‹ ì€ ì¡´ì¬ë§Œìœ¼ë¡œë„ ê±´ê°•í•œ ì—ë„ˆì§€ë¥¼ ë°œì‚°í•˜ëŠ” 'ìê¸°ê´€ë¦¬ì˜ ì•„ì´ì½˜' ìŠ¤íƒ€ì¼ì…ë‹ˆë‹¤!</strong><br>ëª¸ ì „ì²´ì— ì…ì²´ê°ì´ ì‚´ì•„ìˆì–´ íƒ„íƒ„í•˜ê³  íƒ„ë ¥ ìˆëŠ” ì‹¤ë£¨ì—£ì„ ìë‘í•©ë‹ˆë‹¤. ìƒí•˜ì²´ ë¹„ìœ¨ì´ ê· í˜• ì¡í˜€ ìˆì–´ ê¸°ë³¸ í‹°ì…”ì¸ ì™€ ë°ë‹˜ë§Œìœ¼ë¡œë„ ëª…í’ˆ í•ì„ ì™„ì„±í•©ë‹ˆë‹¤. ì‹¬í”Œí•˜ê³  í´ë˜ì‹í•œ ìŠ¤íƒ€ì¼ì´ ë‹¹ì‹ ì˜ ê³ ê¸‰ìŠ¤ëŸ¬ì›€ì„ ê·¹ëŒ€í™”í•©ë‹ˆë‹¤.<br><br><strong>ğŸ§¥ ì¶”ì²œ:</strong> Vë„¥ ìƒì˜, ì •ì‚¬ì´ì¦ˆ ì…”ì¸ , ì¼ìí• ìŠ¬ë™ìŠ¤", 
                     mDesc: "<strong>ë‹¹ì‹ ì€ ì‹ ë¢°ê°ì„ ì£¼ëŠ” 'ì™„ë²½í•œ í”¼ì§€ì»¬'ì˜ ì†Œìœ ìì…ë‹ˆë‹¤!</strong><br>ê°€ìŠ´ ë‘ê»˜ê°ì´ ìˆê³  ê·¼ìœ¡ì´ ì˜ ë¶™ì–´ í´ë˜ì‹í•œ ìˆ˜íŠ¸ í•ì´ ê°€ì¥ ì˜ ì–´ìš¸ë¦½ë‹ˆë‹¤. ìƒì²´ì— ë¬´ê²Œ ì¤‘ì‹¬ì´ ìˆì–´ ë“¬ì§í•˜ê³  ì—ë„ˆì œí‹±í•´ ë³´ì´ë©°, ê¹ƒì´ ì„  ì…”ì¸ ë‚˜ ê¹”ë”í•œ ë‹ˆíŠ¸ë¡œ ì¤‘í›„í•œ ë©‹ì„ ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br><br><strong>ğŸ§¥ ì¶”ì²œ:</strong> ê¹ƒì´ ì„  ì…”ì¸ , ì •ì‚¬ì´ì¦ˆ ìˆ˜íŠ¸, ê°€ì£½ ë¡œí¼" },
                N: { fTitle: "ğŸŒ¸ ì›¨ì´ë¸Œ ì²´í˜•", mTitle: "ğŸ’ ì›¨ì´ë¸Œ ì²´í˜•",
                     fDesc: "<strong>ë‹¹ì‹ ì€ ë³´í˜¸ ë³¸ëŠ¥ì„ ìê·¹í•˜ëŠ” 'ì²­ìˆœí•˜ê³  ìš°ì•„í•œ' ìŠ¤íƒ€ì¼ì…ë‹ˆë‹¤!</strong><br>ê°€ëŠ˜ê³  ë¶€ë“œëŸ¬ìš´ ê³¡ì„  ì‹¤ë£¨ì—£ìœ¼ë¡œ ì—¬ì„±ìŠ¤ëŸ¬ìš´ ë¶„ìœ„ê¸°ë¥¼ ê°€ì¥ ì˜ ì†Œí™”í•©ë‹ˆë‹¤. ê°€ë…€ë¦° ìƒì²´ì™€ ì‡„ê³¨ ë¼ì¸ì´ ë…ë³´ì ì¸ ì¥ì ì´ë©°, í•˜ì´ì›¨ì´ìŠ¤íŠ¸ë‚˜ Aë¼ì¸ ìŠ¤ì»¤íŠ¸ë¡œ ë‹¤ë¦¬ë¥¼ ê¸¸ì–´ ë³´ì´ê²Œ ì—°ì¶œí•˜ë©´ ì™„ë²½í•©ë‹ˆë‹¤.<br><br><strong>ğŸ§¥ ì¶”ì²œ:</strong> í•˜ì´ì›¨ì´ìŠ¤íŠ¸, í¼í”„ ë¸”ë¼ìš°ìŠ¤, Aë¼ì¸ ìŠ¤ì»¤íŠ¸", 
                     mDesc: "<strong>ë‹¹ì‹ ì€ ì–´ë–¤ ì˜·ì´ë“  ê°ê°ì ìœ¼ë¡œ ì†Œí™”í•˜ëŠ” 'ì„¬ì„¸í•œ íŒ¨ì…”ë‹ˆìŠ¤íƒ€'ì…ë‹ˆë‹¤!</strong><br>ìƒì²´ ì„ ì´ ê°€ëŠ˜ê³  ìœ ì—°í•´ ë ˆì´ì–´ë“œë‚˜ íŒ¨í„´ ë£©ì„ ì•„ì£¼ ìŠ¤íƒ€ì¼ë¦¬ì‹œí•˜ê²Œ ì†Œí™”í•©ë‹ˆë‹¤. ë¶€ë“œëŸ¬ìš´ ì¸ìƒì„ ì£¼ë©°, í¬ì¼“ ì…”ì¸ ë‚˜ ë‹ˆíŠ¸ë¡œ ìƒì²´ì— ë³¼ë¥¨ì„ ë”í•˜ë©´ ì™„ë²½í•œ ë°¸ëŸ°ìŠ¤ë¥¼ ë§ì¶œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br><br><strong>ğŸ§¥ ì¶”ì²œ:</strong> í¬ì¼“ ì…”ì¸ , ì„¸ë¯¸ í•˜ì´ì›¨ì´ìŠ¤íŠ¸ ìŠ¬ë™ìŠ¤, ë¶€ë“œëŸ¬ìš´ ë‹ˆíŠ¸" },
                C: { fTitle: "ğŸ•¶ ë‚´ì¶”ëŸ´ ì²´í˜•", mTitle: "ğŸ§¥ ë‚´ì¶”ëŸ´ ì²´í˜•",
                     fDesc: "<strong>ë‹¹ì‹ ì€ ëŸ°ì›¨ì´ì²˜ëŸ¼ ë§Œë“œëŠ” 'ë…ë³´ì ì¸ í”„ë ˆì„'ì˜ ëª¨ë¸ ìŠ¤íƒ€ì¼ì…ë‹ˆë‹¤!</strong><br>ì‹œì›ì‹œì›í•œ ê³¨ê²©ê³¼ ë”± ì¡íŒ ì–´ê¹¨ ë¼ì¸ì€ íŒ¨ì…”ë‹ˆìŠ¤íƒ€ì˜ ì§•í‘œì…ë‹ˆë‹¤. ë°•ì‹œí•˜ê³  ë£¨ì¦ˆí•œ í•ë„ ì‹œí¬í•œ í™”ë³´ì²˜ëŸ¼ ì†Œí™”í•˜ë©°, ë¦°ë„¨ì´ë‚˜ ë°ë‹˜ ê°™ì€ ê±°ì¹œ ì†Œì¬ê°€ ë‹¹ì‹ ì„ ë”ìš± ê³ ê¸‰ìŠ¤ëŸ½ê²Œ ë§Œë“­ë‹ˆë‹¤.<br><br><strong>ğŸ§¥ ì¶”ì²œ:</strong> ì™€ì´ë“œ íŒ¬ì¸ , ì˜¤ë²„í• ì…”ì¸ , ë§¥ì‹œ ì›í”¼ìŠ¤", 
                     mDesc: "<strong>ë‹¹ì‹ ì€ 'ì˜·ë°œ'ì´ ê°€ì¥ ì˜ ë°›ëŠ” ë¶€ëŸ¬ìš´ ëª¨ë¸ ì²´í˜•ì…ë‹ˆë‹¤!</strong><br>íƒ€ê³ ë‚œ ë¼ˆëŒ€ê°€ ë©‹ìŠ¤ëŸ¬ì›Œ ë‚¨ë“¤ì€ ì†Œí™”í•˜ê¸° í˜ë“  ë£¨ì¦ˆí•ì´ë‚˜ ì™€ì´ë“œ íŒ¬ì¸ ë¥¼ ê°€ì¥ ì‹œí¬í•˜ê²Œ ì†Œí™”í•©ë‹ˆë‹¤. ë¬´ì‹¬í•˜ê²Œ íˆ­ ê±¸ì¹œ ì˜¤ë²„ì‚¬ì´ì¦ˆ ì½”íŠ¸ í•œ ì¥ë§Œìœ¼ë¡œë„ ì••ë„ì ì¸ ì‹¤ë£¨ì—£ì„ ì—°ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br><br><strong>ğŸ§¥ ì¶”ì²œ:</strong> ì˜¤ë²„ì‚¬ì´ì¦ˆ ì½”íŠ¸, ì™€ì´ë“œ ë°ë‹˜ íŒ¬ì¸ , ë³¼ë“œí•œ ì‹œê³„" }
            }
        },
        en: {
            nav: "Body Shape Analysis",
            navInfo: "What is this?",
            infoMsg: "Body Shape Analysis system analyzes your natural physical features to suggest the most flattering styles.",
            title: "AI Body Shape Test",
            desc: "AI analyzes your silhouette precisely.<br>Find the best style that maximizes your charm!",
            badgeFree: "âœ… Free Forever",
            badgeSecure: "ğŸ”’ No Photo Storage",
            genderF: "ğŸ‘© Female",
            genderM: "ğŸ‘¨ Male",
            guide: "ğŸ’¡ <strong>Tip for Accuracy</strong><br>Wear clothes that show your body outline clearly for better results!",
            upMain: "Select a Full-body Photo!",
            upSub: "Analysis starts automatically upon upload",
            loadTitle: "Analyzing your photo...",
            loadDesc: "Please wait a moment!",
            btnSave: "ğŸ’¾ Save Result",
            btnShare: "ğŸ“¤ Share",
            btnRetry: "Test Again",
            toast: "Link copied to clipboard!",
            shareTitle: "AI Body Shape Analysis",
            qBank: [
                { q: "How is your neck length?", a: "Relatively short, straight shoulders", b: "Thin and long", c: "Long with prominent bones" },
                { q: "How are your collarbones?", a: "Barely visible", b: "Thin but visible", c: "Thick and prominent" },
                { q: "Hand characteristics?", a: "Small with fleshy palms", b: "Thin and long fingers", c: "Large hands with thick joints" },
                { q: "Waistline position?", a: "High, less defined curve", b: "Low, thin curve", c: "Large skeletal frame" },
                { q: "Knee bone features?", a: "Small, not very visible", b: "Round and moderate", c: "Large and protruding" },
                { q: "Best top fit?", a: "Clean standard fit", b: "Fancy details (ruffles, pockets)", c: "Relaxed loose fit" },
                { q: "Where do you gain weight?", a: "Upper body and stomach", b: "Lower body and hips", c: "Frame gets larger overall" },
                { q: "Skin texture?", a: "Firm and elastic", b: "Soft and fluffy", c: "Thick and leathery feel" },
                { q: "Accessory preference?", a: "Simple and high-quality", b: "Small and shiny", c: "Bold and natural" },
                { q: "Best fabric for you?", a: "Stiff cotton/silk", b: "Chiffon/Soft knit", c: "Linen/Denim" }
            ],
            res: {
                S: { fTitle: "âœ¨ Straight Type", mTitle: "ğŸ‘” Straight Type", 
                     fDesc: "<strong>You are the icon of 'self-management' with healthy energy!</strong><br>Your body has volume and elasticity, giving you a fit look without much effort. With a balanced upper and lower body, you look luxurious even in a simple T-shirt and jeans. Simple and classic styles highlight your value the most.<br><br><strong>ğŸ§¥ Best Pick:</strong> V-neck tops, Standard shirts, Straight slacks", 
                     mDesc: "<strong>You have the 'perfect physique' that gives a sense of trust!</strong><br>With a thick chest and well-attached muscles, you look best in classic suits. Your center of gravity is in the upper body, giving a reliable and energetic impression. Crisp shirts look amazing on you.<br><br><strong>ğŸ§¥ Best Pick:</strong> Collared shirts, Classic suits, Loafers" },
                N: { fTitle: "ğŸŒ¸ Wave Type", mTitle: "ğŸ’ Wave Type",
                     fDesc: "<strong>You have an 'elegant and innocent' style that sparks protective instincts!</strong><br>Your silhouette is made of soft curves, perfect for feminine styles. Your slender upper body and collarbones are unique assets. High-waisted bottoms make your legs look incredibly long.<br><br><strong>ğŸ§¥ Best Pick:</strong> High-waist, Puff blouses, A-line skirts", 
                     mDesc: "<strong>You are a 'delicate fashionista' who pulls off any style!</strong><br>With a slender and flexible upper body, you look stylish in layered or patterned looks. Soft knits or shirts with pockets add volume to your upper body, creating a perfect balance.<br><br><strong>ğŸ§¥ Best Pick:</strong> Pocket shirts, Semi-high waist slacks, Soft knits" },
                C: { fTitle: "ğŸ•¶ Natural Type", mTitle: "ğŸ§¥ Natural Type",
                     fDesc: "<strong>You have a 'unique frame' that turns any street into a runway!</strong><br>Your wide shoulders and cool skeletal frame are signs of a fashionista. You look chic even in boxy and loose fits. Rough materials like linen or denim transform into a luxurious mood on you.<br><br><strong>ğŸ§¥ Best Pick:</strong> Wide pants, Overfit shirts, Maxi dresses", 
                     mDesc: "<strong>You have the 'model body' that looks good in anything!</strong><br>Born with a stylish frame, you pull off loose fits and wide pants more chicly than anyone else. An oversized coat draped casually creates an overwhelming silhouette.<br><br><strong>ğŸ§¥ Best Pick:</strong> Oversized coats, Wide denim pants, Bold watches" }
            }
        }
    };

    function showInfo() {
        alert(TEXTS[currentLang].infoMsg);
    }

    function toggleLang() {
        currentLang = currentLang === 'ko' ? 'en' : 'ko';
        updateUI();
        if (!document.getElementById('view-survey').classList.contains('hidden')) initSurvey();
        if (!document.getElementById('view-result').classList.contains('hidden')) finalize();
    }

    function updateUI() {
        const t = TEXTS[currentLang];
        document.getElementById('btn-ko').classList.toggle('active', currentLang === 'ko');
        document.getElementById('btn-en').classList.toggle('active', currentLang === 'en');
        document.getElementById('nav-title').innerText = t.nav;
        document.getElementById('nav-info').innerText = t.navInfo;
        document.getElementById('main-title').innerText = t.title;
        document.getElementById('main-desc').innerHTML = t.desc;
        document.getElementById('badge-free').innerText = t.badgeFree;
        document.getElementById('badge-secure').innerText = t.badgeSecure;
        document.getElementById('btn-female').innerText = t.genderF;
        document.getElementById('btn-male').innerText = t.genderM;
        document.getElementById('guide-box').innerHTML = t.guide;
        document.getElementById('upload-main').innerText = t.upMain;
        document.getElementById('upload-sub').innerText = t.upSub;
        document.getElementById('loading-title').innerText = t.loadTitle;
        document.getElementById('loading-desc').innerText = t.loadDesc;
        document.getElementById('btn-save').innerText = t.btnSave;
        document.getElementById('btn-share').innerText = t.btnShare;
        document.getElementById('btn-retry').innerText = t.btnRetry;
        document.getElementById('toast').innerText = t.toast;
    }

    const MODEL_URL = "https://teachablemachine.withgoogle.com/models/Y9Y9vIofD/"; 
    let model, aiData = { S: 0, N: 0, C: 0 }, surveyData = { S: 0, N: 0, C: 0 };
    let currentGender = 'female';
    let winnerKey = 'S';

    function setGender(g) {
        currentGender = g;
        document.getElementById('btn-female').classList.toggle('active', g === 'female');
        document.getElementById('btn-male').classList.toggle('active', g === 'male');
    }

    async function loadTM() { try { model = await tmImage.load(MODEL_URL + "model.json", MODEL_URL + "metadata.json"); } catch(e) {} }
    loadTM();

    async function processAI(input) {
        if (!input.files[0]) return;
        document.getElementById('view-upload').classList.add('hidden');
        document.getElementById('view-loading').classList.remove('hidden');
        const img = document.createElement('img');
        img.src = URL.createObjectURL(input.files[0]);
        img.onload = async () => {
            if (model) {
                const pred = await model.predict(img);
                pred.forEach(p => {
                    if (p.className.includes("Straight")) aiData.S = p.probability;
                    if (p.className.includes("Wave")) aiData.N = p.probability;
                    if (p.className.includes("Natural")) aiData.C = p.probability;
                });
            }
            setTimeout(() => {
                document.getElementById('view-loading').classList.add('hidden');
                document.getElementById('view-survey').classList.remove('hidden');
                initSurvey();
            }, 3000);
        };
    }

    let qIdx = 0;
    function initSurvey() {
        const qList = TEXTS[currentLang].qBank;
        if (qIdx >= qList.length) return finalize();
        const q = qList[qIdx];
        document.getElementById('q-text').innerText = `Q${qIdx+1}. ${q.q}`;
        const optArea = document.getElementById('q-options');
        optArea.innerHTML = "";
        [q.a, q.b, q.c].forEach((t, i) => {
            const b = document.createElement('button');
            b.className = 'btn';
            b.innerText = t;
            b.onclick = () => { surveyData[['S','N','C'][i]]++; qIdx++; initSurvey(); };
            optArea.appendChild(b);
        });
    }

    function finalize() {
        document.getElementById('view-survey').classList.add('hidden');
        document.getElementById('view-result').classList.remove('hidden');
        const total = {
            S: (aiData.S * 0.5) + ((surveyData.S / 10) * 0.5),
            N: (aiData.N * 0.5) + ((surveyData.N / 10) * 0.5),
            C: (aiData.C * 0.5) + ((surveyData.C / 10) * 0.5)
        };
        if (aiData.S + aiData.N + aiData.C > 0) winnerKey = Object.keys(total).reduce((a, b) => total[a] > total[b] ? a : b);
        const tRes = TEXTS[currentLang].res[winnerKey];
        const resData = currentGender === 'male' ? { title: tRes.mTitle, desc: tRes.mDesc } : { title: tRes.fTitle, desc: tRes.fDesc };
        const imgMap = { 'S': { f: "./images/female_straight.jpg", m: "./images/male_straight.jpg" }, 'N': { f: "./images/female_wave.jpg", m: "./images/male_wave.jpg" }, 'C': { f: "./images/female_natural.jpg", m: "./images/male_natural.jpg" } };
        const resImg = currentGender === 'male' ? imgMap[winnerKey].m : imgMap[winnerKey].f;
        document.getElementById('res-title').innerText = resData.title;
        document.getElementById('res-body').innerHTML = `<div style="text-align:center;"><img src="${resImg}" style="width:50%; max-width:150px; border:none; box-shadow:none; margin-bottom:20px;"></div>${resData.desc}`;
    }

    function downloadResult() {
        html2canvas(document.getElementById('capture-area')).then(canvas => {
            const link = document.createElement('a'); link.download = 'result.png';
            link.href = canvas.toDataURL(); link.click();
        });
    }

    function openShareMenu() {
        if (navigator.share) {
            navigator.share({ title: TEXTS[currentLang].shareTitle, url: window.location.href });
        } else {
            const dummy = document.createElement("input");
            document.body.appendChild(dummy); dummy.value = window.location.href; dummy.select();
            document.execCommand("copy"); document.body.removeChild(dummy);
            const toast = document.getElementById("toast");
            toast.classList.add("show"); setTimeout(() => { toast.classList.remove("show"); }, 2500);
        }
    }

    document.addEventListener('contextmenu', function(e) {
        e.preventDefault();
        alert(currentLang === 'ko' ? 'ì €ì‘ê¶Œ ë³´í˜¸ë¥¼ ìœ„í•´ ì´ë¯¸ì§€ ë¬´ë‹¨ ì €ì¥ ë° ë³µì‚¬ë¥¼ ê¸ˆì§€í•©ë‹ˆë‹¤.' : 'Image saving/copying is disabled for copyright protection.');
    });
</script>
</body>
</html>